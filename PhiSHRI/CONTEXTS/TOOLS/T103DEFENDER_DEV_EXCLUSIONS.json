{
  "door_code": "T103DEFENDER_DEV_EXCLUSIONS",
  "semantic_path": "TOOLS.WINDOWS.DEFENDER_EXCLUSIONS",
  "aliases": [
    "defender_exclusions",
    "windows_defender_dev",
    "git_slow_windows",
    "npm_slow",
    "cargo_slow",
    "antivirus_dev",
    "defender_whitelist"
  ],
  "context_bundle": {
    "summary": "Windows Defender real-time scanning kills dev tool performance. Git, npm, cargo, dotnet all suffer 10-50x slowdowns. Solution: Add exclusions for dev folders and processes. This is the #1 cause of 'git status timeout' and 'why is my build so slow' on Windows.",
    "prerequisites": [],
    "related_doors": [
      "T95WINDOWS_MCP_CORE",
      "E41PATH_MISMATCH"
    ],
    "onboarding": {
      "quick_start": "Run PowerShell as Admin: Add-MpPreference -ExclusionPath 'C:\\dev' and Add-MpPreference -ExclusionProcess 'git.exe'. Instant 10-50x speedup for git operations.",
      "full_context_path": "",
      "common_patterns": [
        "Exclude dev folder: Add-MpPreference -ExclusionPath 'C:\\dev'",
        "Exclude process: Add-MpPreference -ExclusionProcess 'git.exe'",
        "View exclusions: Get-MpPreference | Select -Expand ExclusionPath",
        "Remove exclusion: Remove-MpPreference -ExclusionPath 'C:\\old'"
      ],
      "symptoms": [
        "git status takes 2-5 seconds instead of <100ms",
        "npm install takes 3+ minutes",
        "cargo build inexplicably slow",
        "MCP git tools timing out",
        "IDE indexing never finishes",
        "node_modules operations hang"
      ],
      "full_exclusion_script": "# Run as Administrator\n\n# === DEV FOLDERS ===\nAdd-MpPreference -ExclusionPath 'C:\\dev'\nAdd-MpPreference -ExclusionPath 'C:\\src'\nAdd-MpPreference -ExclusionPath 'C:\\repos'\nAdd-MpPreference -ExclusionPath \"$env:USERPROFILE\\source\"\nAdd-MpPreference -ExclusionPath \"$env:USERPROFILE\\Projects\"\nAdd-MpPreference -ExclusionPath \"$env:USERPROFILE\\.cargo\"\nAdd-MpPreference -ExclusionPath \"$env:USERPROFILE\\.rustup\"\nAdd-MpPreference -ExclusionPath \"$env:USERPROFILE\\.nuget\"\nAdd-MpPreference -ExclusionPath \"$env:USERPROFILE\\go\"\nAdd-MpPreference -ExclusionPath \"$env:USERPROFILE\\AppData\\Local\\npm-cache\"\nAdd-MpPreference -ExclusionPath \"$env:USERPROFILE\\AppData\\Roaming\\npm\"\nAdd-MpPreference -ExclusionPath \"$env:USERPROFILE\\.gradle\"\nAdd-MpPreference -ExclusionPath \"$env:USERPROFILE\\.m2\"\nAdd-MpPreference -ExclusionPath \"$env:LOCALAPPDATA\\Programs\\Python\"\n\n# === DEV PROCESSES ===\nAdd-MpPreference -ExclusionProcess 'git.exe'\nAdd-MpPreference -ExclusionProcess 'node.exe'\nAdd-MpPreference -ExclusionProcess 'npm.cmd'\nAdd-MpPreference -ExclusionProcess 'cargo.exe'\nAdd-MpPreference -ExclusionProcess 'rustc.exe'\nAdd-MpPreference -ExclusionProcess 'rust-analyzer.exe'\nAdd-MpPreference -ExclusionProcess 'go.exe'\nAdd-MpPreference -ExclusionProcess 'gopls.exe'\nAdd-MpPreference -ExclusionProcess 'dotnet.exe'\nAdd-MpPreference -ExclusionProcess 'msbuild.exe'\nAdd-MpPreference -ExclusionProcess 'python.exe'\nAdd-MpPreference -ExclusionProcess 'python3.exe'\nAdd-MpPreference -ExclusionProcess 'java.exe'\nAdd-MpPreference -ExclusionProcess 'javac.exe'\nAdd-MpPreference -ExclusionProcess 'code.exe'\nAdd-MpPreference -ExclusionProcess 'devenv.exe'\nAdd-MpPreference -ExclusionProcess 'rider64.exe'\nAdd-MpPreference -ExclusionProcess 'idea64.exe'\nAdd-MpPreference -ExclusionProcess 'phpstorm64.exe'\nAdd-MpPreference -ExclusionProcess 'webstorm64.exe'\nAdd-MpPreference -ExclusionProcess 'docker.exe'\nAdd-MpPreference -ExclusionProcess 'kubectl.exe'\nAdd-MpPreference -ExclusionProcess 'terraform.exe'\nAdd-MpPreference -ExclusionProcess 'claude.exe'\n\nWrite-Host 'Exclusions applied. Verify:' -ForegroundColor Green\nGet-MpPreference | Select -Expand ExclusionPath\nGet-MpPreference | Select -Expand ExclusionProcess",
      "known_errors": [
        {
          "error": "git status timeout / takes 2+ seconds",
          "cause": "Defender scanning .git folder (thousands of small files)",
          "solution": "Add-MpPreference -ExclusionProcess 'git.exe' AND exclude repo folder",
          "prevention": "Run exclusion script on new Windows installs",
          "related_door": "T103DEFENDER_DEV_EXCLUSIONS"
        },
        {
          "error": "npm install extremely slow",
          "cause": "Defender scanning every file in node_modules",
          "solution": "Exclude node.exe process and npm-cache folder",
          "prevention": "Add npm-cache and project folders to exclusions",
          "related_door": "T103DEFENDER_DEV_EXCLUSIONS"
        },
        {
          "error": "cargo build slow, rustc hanging",
          "cause": "Defender scanning .cargo, .rustup, and target folder",
          "solution": "Exclude cargo.exe, rustc.exe, and .cargo/.rustup folders",
          "prevention": "Always exclude Rust toolchain on fresh install",
          "related_door": "T103DEFENDER_DEV_EXCLUSIONS"
        },
        {
          "error": "Access denied adding exclusion",
          "cause": "Not running as Administrator",
          "solution": "Right-click PowerShell > Run as Administrator",
          "prevention": "Always use elevated prompt for Defender changes",
          "related_door": "T103DEFENDER_DEV_EXCLUSIONS"
        }
      ],
      "performance_impact": {
        "git_status": {
          "before": "2000-5000ms",
          "after": "30-80ms",
          "improvement": "25-60x"
        },
        "npm_install": {
          "before": "3-5 minutes",
          "after": "30-60 seconds",
          "improvement": "3-6x"
        },
        "cargo_build": {
          "before": "varies, feels slow",
          "after": "noticeably faster",
          "improvement": "2-4x"
        },
        "dotnet_build": {
          "before": "slow restore + build",
          "after": "reasonable",
          "improvement": "2-3x"
        }
      },
      "diagnostic_script": "$t1 = Measure-Command { git status 2>&1 } | Select -Expand TotalMilliseconds\nWrite-Host \"git status: $([int]$t1)ms\"\nif ($t1 -gt 500) { Write-Host '[SLOW] Add Defender exclusions!' -ForegroundColor Red }\nelse { Write-Host '[OK] Git is fast' -ForegroundColor Green }"
    },
    "resources": {
      "docs": [
        "https://learn.microsoft.com/en-us/powershell/module/defender/add-mppreference",
        "https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/configure-exclusions-microsoft-defender-antivirus"
      ],
      "code": [],
      "tests": [],
      "errors": []
    },
    "metadata": {
      "last_updated": "2025-11-27T04:00:00Z",
      "confidence": 1.0,
      "usage_count": 0,
      "success_rate": 0.0,
      "tags": [
        "windows",
        "defender",
        "antivirus",
        "performance",
        "git",
        "dev-tools",
        "exclusions",
        "optimization"
      ],
      "category": "TOOLS",
      "subcategory": "WINDOWS_OPTIMIZATION",
      "version": "1.0.0",
      "tested_on": [
        "Windows 10",
        "Windows 11"
      ],
      "agent_affinity": [
        "DC",
        "TERMC"
      ],
      "size_bytes": 7241,
      "token_estimate": 1811.0
    }
  }
}
