{
  "door_code": "T13K8S_SECRETS",
  "semantic_path": "TOOLS.KUBERNETES.SECRETS_MANAGEMENT",
  "aliases": [
    "k8s_secrets",
    "kubernetes_secrets",
    "secret_management",
    "vault"
  ],
  "context_bundle": {
    "summary": "Kubernetes secrets management: Store sensitive data (passwords, tokens, keys) securely in K8s. Types: Opaque (generic), TLS (certificates), Docker registry. Native K8s Secrets: Base64 encoded (not encrypted), stored in etcd. Better: External secret managers (HashiCorp Vault, AWS Secrets Manager, Azure Key Vault, Google Secret Manager) + External Secrets Operator. Patterns: Sealed Secrets (encrypt before commit), SOPS (encrypt in Git), CSI driver (mount secrets as volumes). Access: Environment variables (envFrom), volume mounts (secretKeyRef). Avoid: Plain text in YAML, committing secrets to Git, hardcoding in images.",
    "prerequisites": [
      "W48K8S_DEPLOY",
      "S05SECRETS",
      "S06ENCRYPTION"
    ],
    "related_doors": [
      "T11CICD",
      "W46TERRAFORM",
      "A08AGENT_COORD"
    ],
    "onboarding": {
      "quick_start": "K8s secrets: Store sensitive data. Create: kubectl create secret generic db-password --from-literal=password=secret123. Use in pod (env): env: - name: DB_PASSWORD; valueFrom: secretKeyRef: {name: db-password, key: password}. Use in pod (volume): volumes: - name: secret-vol; secret: {secretName: db-password}; volumeMounts: - name: secret-vol; mountPath: /etc/secrets; readOnly: true. External Secrets Operator (Vault): apiVersion: external-secrets.io/v1beta1; kind: ExternalSecret; metadata: name: vault-secret; spec: refreshInterval: 1h; secretStoreRef: {name: vault-backend, kind: SecretStore}; target: {name: k8s-secret}; data: - secretKey: password; remoteRef: {key: secret/data/db, property: password}. Sealed Secrets: kubeseal <secret.yaml >sealed-secret.yaml (encrypted, safe to commit). SOPS: sops --encrypt secret.yaml >encrypted.yaml (encrypt with KMS). CSI driver: Mount Azure Key Vault/AWS Secrets Manager as volume. RBAC: Restrict secret access with roles.",
      "full_context_path": "/PhiDEX/MASTER_CODEX/03_DEVELOPMENT/DEVELOPMENT_WORKFLOWS_COMPREHENSIVE_GUIDE.md",
      "common_patterns": [
        "Create secret: kubectl create secret generic api-key --from-literal=key=abc123 --from-file=cert.pem; kubectl get secret api-key -o yaml (base64 encoded)",
        "Pod with env var: spec: containers: - name: app; image: myapp; env: - name: API_KEY; valueFrom: secretKeyRef: {name: api-key, key: key}",
        "Pod with volume mount: spec: volumes: - name: secret-volume; secret: {secretName: api-key}; containers: - name: app; volumeMounts: - name: secret-volume; mountPath: /etc/secrets; readOnly: true; # Access: cat /etc/secrets/key",
        "TLS secret: kubectl create secret tls my-tls-secret --cert=path/to/tls.crt --key=path/to/tls.key; # Use in Ingress: spec: tls: - secretName: my-tls-secret; hosts: [myapp.com]",
        "External Secrets Operator: kind: SecretStore; spec: provider: vault: {server: 'http://vault:8200', path: secret, auth: kubernetes: {mountPath: kubernetes, role: my-role}}; kind: ExternalSecret; spec: secretStoreRef: {name: vault}; target: {name: db-creds}; data: - secretKey: username; remoteRef: {key: db/creds, property: username}",
        "Sealed Secrets: Install controller: kubectl apply -f controller.yaml; Seal: kubeseal --format yaml <secret.yaml >sealed-secret.yaml; Commit sealed-secret.yaml to Git; Controller decrypts in cluster",
        "SOPS (AWS KMS): sops --kms arn:aws:kms:... --encrypt secret.yaml >encrypted.yaml; Decrypt in CI: sops --decrypt encrypted.yaml | kubectl apply -f -",
        "CSI Secret Store (Azure): kind: SecretProviderClass; spec: provider: azure; parameters: {keyvaultName: myvault, objects: 'array: - objectName: db-password, objectType: secret'}; Pod: volumes: - name: secrets; csi: {driver: secrets-store.csi.k8s.io, volumeAttributes: {secretProviderClass: azure-secrets}}",
        "RBAC: kind: Role; rules: - apiGroups: ['']; resources: [secrets]; verbs: [get]; resourceNames: [db-password]"
      ],
      "known_errors": []
    },
    "resources": {
      "docs": [
        "/PhiDEX/MASTER_CODEX/03_DEVELOPMENT/DEVELOPMENT_WORKFLOWS_COMPREHENSIVE_GUIDE.md"
      ],
      "code": [],
      "tests": [],
      "errors": []
    },
    "metadata": {
      "last_updated": "2025-11-20T21:10:00Z",
      "confidence": 1.0,
      "usage_count": 0,
      "success_rate": 0.0,
      "tags": [
        "kubernetes",
        "k8s",
        "secrets",
        "vault",
        "external_secrets",
        "sealed_secrets",
        "security"
      ],
      "category": "TOOLS",
      "subcategory": "KUBERNETES",
      "version": "1.0.0",
      "tested_on": [
        "Kubernetes",
        "Vault",
        "AWS Secrets Manager",
        "Azure Key Vault"
      ],
      "agent_affinity": [
        "CMDC",
        "VSCC",
        "TERMC"
      ],
      "size_bytes": 4719,
      "token_estimate": 1180.0
    }
  }
}
